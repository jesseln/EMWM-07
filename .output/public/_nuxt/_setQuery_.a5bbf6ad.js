import{u as H,a as K,b as P,_ as ae,c as ie,d as ue}from"./MarkItem.9f1c29ac.js";import{o as Q,u as de,_ as _e}from"./AnnotationPanel.4dfb10f7.js";import{_ as re,s as T,r as b,f as le,g as ye,o as s,c as r,a as t,h as e,t as l,n as a,F as u,i as d,j as G,p as ce,e as ne,k as E,l as L,m as he,q as te,v as ve,b as se}from"./entry.de7ae5fc.js";import{u as ge}from"./libraryStore.8c5c4be6.js";import"./useSupabaseClient.97dbf750.js";const O=$=>(ce("data-v-da411839"),$=$(),ne(),$),ke={class:"library-nav-container"},pe={class:"library-nav-wrapper"},be={class:"library-nav-dropdown"},we=O(()=>t("div",{class:"library-nav-title-block"},[t("h3",{class:"library-nav-view"},"Section")],-1)),fe={class:"aselect"},Se={class:"label"},Ce={key:0},$e={key:1},Me={class:"scrollable"},Ae=["onClick"],Be=["onClick"],Te=["onClick"],Ne=["onClick"],me={class:"library-nav-dropdown"},xe=O(()=>t("div",{class:"library-nav-title-block"},[t("h3",{class:"library-nav-view"},"Sort")],-1)),De={class:"aselect"},He={class:"label"},Le={key:0},Oe={key:1},Ie={class:"scrollable"},Ve=["onClick"],je=["onClick"],qe=["onClick"],Ze=["onClick"],Qe={class:"library-nav-dropdown"},Ee=O(()=>t("div",{class:"library-nav-title-block"},[t("h3",{class:"library-nav-view"},"Proportions")],-1)),Pe={class:"aselect"},Re={class:"label"},ze={key:0},Fe={key:1},Ye={class:"scrollable"},Je=["onClick"],We=["onClick"],Ge=["onClick"],Ke=["onClick"],Ue={class:"library-nav-dropdown"},Xe=O(()=>t("div",{class:"library-nav-title-block"},[t("h3",{class:"library-nav-view"},"Colour")],-1)),eo={class:"aselect"},oo={class:"label"},to={key:0},so={key:1},ro={class:"scrollable"},lo=["onClick"],co=["onClick"],no=["onClick"],ao=["onClick"],io={class:"library-nav-colour-wrapper"},uo=O(()=>t("div",{class:"library-nav-title-block"},[t("h3",{class:"library-nav-view-colour"},"Colour Categories")],-1)),_o={class:"library-nav-colour-item"},yo={class:"library-nav-colour-label"},ho={__name:"LibraryNav",setup($){const w=H(),{libraryData:R,libraryDisplay:c,formattedLibrary:z,itemHeight:m,itemColour:I,colourSet:V,viewHeightBounds:U,viewColourSet:X}=T(w),{parseDatabase:ee,handleViewSelection:h,getIDP:x,handleColour:F}=H(),S=K(),{categoryMap:C,viewMap:Y,invCategoryMap:D,colourMapFiltered:M,scales:J}=T(S);console.log("Array.from colourSet",w.getColourSet),b(S.categoryMap.get("NotSelected"));const A=b(S.categoryMap.get("Agent")),N=b(S.categoryMap.get("Book")),B=b(S.categoryMap.get("Mark")),k=b({NotSelected:{},Agent:{},Book:{},Mark:{}}),_=b({NotSelected:{},Agent:{},Book:{},Mark:{}}),f=b({NotSelected:{},Agent:{},Book:{},Mark:{}}),v=b({NotSelected:{},Agent:{},Book:{},Mark:{}});Object.entries(S.viewMap.get("NotSelected")).forEach(g=>{const[n,o]=g;o.useSection&&(k.value.NotSelected[n]=o),o.useOrder&&(_.value.NotSelected[n]=o),o.useHeight&&(f.value.NotSelected[n]=o),o.useColour&&(v.value.NotSelected[n]=o)}),Object.entries(S.viewMap.get("Agent")).forEach(g=>{const[n,o]=g;o.useSection&&(k.value.Agent[n]=o),o.useOrder&&(_.value.Agent[n]=o),o.useHeight&&(f.value.Agent[n]=o),o.useColour&&(v.value.Agent[n]=o)}),Object.entries(S.viewMap.get("Book")).forEach(g=>{const[n,o]=g;o.useSection&&(k.value.Book[n]=o),o.useOrder&&(_.value.Book[n]=o),o.useHeight&&(f.value.Book[n]=o),o.useColour&&(v.value.Book[n]=o)}),Object.entries(S.viewMap.get("Mark")).forEach(g=>{const[n,o]=g;o.useSection&&(k.value.Mark[n]=o),o.useOrder&&(_.value.Mark[n]=o),o.useHeight&&(f.value.Mark[n]=o),o.useColour&&(v.value.Mark[n]=o)});const y=le(()=>({section:`${w.libraryDisplay.viewType.shelf}:${[w.libraryDisplay.view.shelf]}`,sort:`${w.libraryDisplay.viewType.bookend}:${[w.libraryDisplay.view.bookend]}`,height:`${w.libraryDisplay.viewType.height}:${[w.libraryDisplay.view.height]}`,colour:`${w.libraryDisplay.viewType.colour}:${[w.libraryDisplay.view.colour]}`})),i=ye({section:!1,sort:!1,height:!1,colour:!1}),j=b(!1),q=b(!1),W=b(!1),oe=b(!1),Z=g=>{console.log(g),i[g]=!i[g]};return Q(j,g=>i.section?i.section=!i.section:null),Q(q,g=>i.sort?i.sort=!i.sort:null),Q(W,g=>i.height?i.height=!i.height:null),Q(oe,g=>i.colour?i.colour=!i.colour:null),(g,n)=>(s(),r("div",ke,[t("div",pe,[t("div",be,[we,t("div",fe,[t("div",{ref_key:"section",ref:j,class:"selector",onClick:n[0]||(n[0]=o=>Z("section"))},[t("div",Se,[e(c).viewType.shelf!=="NotSelected"?(s(),r("p",Ce,l(e(c).viewType.shelf)+" | "+l(e(C).get(e(c).viewType.shelf)[e(c).view.shelf])+" - "+l(e(c).view.shelfOrderMethod==="A"?"A to Z":"Low to High"),1)):(s(),r("p",$e,l(e(C).get(e(c).viewType.shelf)[e(c).view.shelf]),1))]),t("div",{class:a(["arrow",{expanded:e(i)}])},null,2),t("div",{class:a(["categories",{hidden:!e(i).section}])},[t("ul",Me,[(s(!0),r(u,null,d(e(k).NotSelected,o=>(s(),r("li",{class:a({current:`NotSelected:${o.category}`===e(y).section}),onClick:p=>e(h)("shelf",o.category,"NotSelected")}," Not Selected ",10,Ae))),256)),(s(!0),r(u,null,d(e(k).Agent,o=>(s(),r("li",{class:a({current:`Agent:${o.category}`===e(y).section}),onClick:p=>e(h)("shelf",o.category,"Agent")}," Agent | "+l(e(A)[o.category])+" - "+l(e(k).Agent[o.category].sortMethod==="A"?"A to Z":"Low to High"),11,Be))),256)),(s(!0),r(u,null,d(e(k).Book,o=>(s(),r("li",{class:a({current:`Book:${o.category}`===e(y).section}),onClick:p=>e(h)("shelf",o.category,"Book")}," Book | "+l(e(N)[o.category])+" - "+l(e(k).Book[o.category].sortMethod==="A"?"A to Z":"Low to High"),11,Te))),256)),(s(!0),r(u,null,d(e(k).Mark,o=>(s(),r("li",{class:a({current:`Mark:${o.category}`===e(y).section}),onClick:p=>e(h)("shelf",o.category,"Mark")}," Mark | "+l(e(B)[o.category])+" - "+l(e(k).Mark[o.category].sortMethod==="A"?"A to Z":"Low to High"),11,Ne))),256))])],2)],512)])]),t("div",me,[xe,t("div",De,[t("div",{ref_key:"sort",ref:q,class:"selector",onClick:n[1]||(n[1]=o=>Z("sort"))},[t("div",He,[e(c).viewType.bookend!=="NotSelected"?(s(),r("p",Le,l(e(c).viewType.bookend)+" | "+l(e(C).get(e(c).viewType.bookend)[e(c).view.bookend])+" - "+l(e(c).view.bookendOrderMethod==="A"?"A to Z":"Low to High"),1)):(s(),r("p",Oe,l(e(C).get(e(c).viewType.bookend)[e(c).view.bookend]),1))]),t("div",{class:a(["arrow",{expanded:e(i)}])},null,2),t("div",{class:a(["categories",{hidden:!e(i).sort}])},[t("ul",Ie,[(s(!0),r(u,null,d(e(_).NotSelected,o=>(s(),r("li",{class:a({current:`NotSelected:${o.category}`===e(y).sort}),onClick:p=>e(h)("bookend",o.category,"NotSelected")}," Not Selected ",10,Ve))),256)),(s(!0),r(u,null,d(e(_).Agent,o=>(s(),r("li",{class:a({current:`Agent:${o.category}`===e(y).sort}),onClick:p=>e(h)("bookend",o.category,"Agent")}," Agent | "+l(e(A)[o.category])+" - "+l(e(_).Agent[o.category].sortMethod==="A"?"A to Z":"Low to High"),11,je))),256)),(s(!0),r(u,null,d(e(_).Book,o=>(s(),r("li",{class:a({current:`Book:${o.category}`===e(y).sort}),onClick:p=>e(h)("bookend",o.category,"Book")}," Book | "+l(e(N)[o.category])+" - "+l(e(_).Book[o.category].sortMethod==="A"?"A to Z":"Low to High"),11,qe))),256)),(s(!0),r(u,null,d(e(_).Mark,o=>(s(),r("li",{class:a({current:`Mark:${o.category}`===e(y).sort}),onClick:p=>e(h)("bookend",o.category,"Mark")}," Mark | "+l(e(B)[o.category])+" - "+l(e(_).Mark[o.category].sortMethod==="A"?"A to Z":"Low to High"),11,Ze))),256))])],2)],512)])]),t("div",Qe,[Ee,t("div",Pe,[t("div",{ref_key:"height",ref:W,class:"selector",onClick:n[2]||(n[2]=o=>Z("height"))},[t("div",Re,[e(c).viewType.height!=="NotSelected"?(s(),r("p",ze,l(e(c).viewType.height)+" | "+l(e(C).get(e(c).viewType.height)[e(c).view.height]),1)):(s(),r("p",Fe,l(e(C).get(e(c).viewType.height)[e(c).view.height]),1))]),t("div",{class:a(["arrow",{expanded:e(i)}])},null,2),t("div",{class:a(["categories",{hidden:!e(i).height}])},[t("ul",Ye,[(s(!0),r(u,null,d(e(f).NotSelected,o=>(s(),r("li",{class:a({current:`NotSelected:${o.category}`===e(y).height}),onClick:p=>e(h)("height",o.category,"NotSelected")}," Not Selected ",10,Je))),256)),(s(!0),r(u,null,d(e(f).Agent,o=>(s(),r("li",{class:a({current:`Agent:${o.category}`===e(y).height}),onClick:p=>e(h)("height",o.category,"Agent")}," Agent | "+l(e(A)[o.category]),11,We))),256)),(s(!0),r(u,null,d(e(f).Book,o=>(s(),r("li",{class:a({current:`Book:${o.category}`===e(y).height}),onClick:p=>e(h)("height",o.category,"Book")}," Book | "+l(e(N)[o.category]),11,Ge))),256)),(s(!0),r(u,null,d(e(f).Mark,o=>(s(),r("li",{class:a({current:`Mark:${o.category}`===e(y).height}),onClick:p=>e(h)("height",o.category,"Mark")}," Mark | "+l(e(B)[o.category]),11,Ke))),256))])],2)],512)])]),t("div",Ue,[Xe,t("div",eo,[t("div",{ref_key:"colour",ref:oe,class:"selector",onClick:n[3]||(n[3]=o=>Z("colour"))},[t("div",oo,[e(c).viewType.colour!=="NotSelected"?(s(),r("p",to,l(e(c).viewType.colour)+" | "+l(e(C).get(e(c).viewType.colour)[e(c).view.colour]),1)):(s(),r("p",so,l(e(C).get(e(c).viewType.colour)[e(c).view.colour]),1))]),t("div",{class:a(["arrow",{expanded:e(i)}])},null,2),t("div",{class:a(["categories",{hidden:!e(i).colour}])},[t("ul",ro,[(s(!0),r(u,null,d(e(v).NotSelected,o=>(s(),r("li",{class:a({current:`NotSelected:${o.category}`===e(y).colour}),onClick:p=>e(h)("colour",o.category,"NotSelected")}," Not Selected ",10,lo))),256)),(s(!0),r(u,null,d(e(v).Agent,o=>(s(),r("li",{class:a({current:`Agent:${o.category}`===e(y).colour}),onClick:p=>e(h)("colour",o.category,"Agent")}," Agent | "+l(e(A)[o.category]),11,co))),256)),(s(!0),r(u,null,d(e(v).Book,o=>(s(),r("li",{class:a({current:`Book:${o.category}`===e(y).colour}),onClick:p=>e(h)("colour",o.category,"Book")}," Book | "+l(e(N)[o.category]),11,no))),256)),(s(!0),r(u,null,d(e(v).Mark,o=>(s(),r("li",{class:a({current:`Mark:${o.category}`===e(y).colour}),onClick:p=>e(h)("colour",o.category,"Mark")}," Mark | "+l(e(B)[o.category]),11,ao))),256))])],2)],512)])])]),t("div",io,[uo,(s(!0),r(u,null,d(e(V),o=>(s(),r("div",{key:o},[t("div",_o,[t("div",{class:"library-nav-colour-category",style:G({background:e(I)(o)})},null,4),t("h2",yo,l(o),1)])]))),128))])]))}},vo=re(ho,[["__scopeId","data-v-da411839"]]),go={class:"shelf-title-box"},ko={class:"shelf-title"},po={class:"shelf-inner"},bo={class:"section-category"},wo={class:"section-value"},fo=t("div",{class:"section-shelf-box"},null,-1),So={__name:"LibraryView",setup($){const w=H(),{libraryData:R,libraryDisplay:c,formattedLibrary:z,itemHeight:m,itemColour:I,viewHeightBounds:V,viewColourSet:U}=T(w),{parseDatabase:X,handleViewSelection:ee,getIDP:h,itemTypeCheck:x}=H(),F=P();T(F),P();const S=K(),{categoryMap:C,invCategoryMap:Y,scales:D,libraryItemBundle:M}=T(S);return b(!1),(J,A)=>{const N=ae,B=ie,k=ue;return s(!0),r(u,null,d(e(z),_=>(s(),r("div",{class:"shelf",key:_},[t("div",go,[t("h2",ko,l(_[0]),1)]),t("div",po,[(s(!0),r(u,null,d(_[1],f=>(s(),r("div",{class:"section-wrapper",key:f},[t("div",{class:"section-title-box",style:G({height:e(D).maxShelfHeight+"px"})},[t("h3",bo,l(e(C).get(e(c).viewType.bookend)[e(c).view.bookend]),1),t("h3",wo,l(f[0]),1),fo],4),(s(!0),r(u,null,d(f[1],v=>(s(),r("div",{class:"section-inner",key:JSON.stringify(v),style:G({height:e(D).maxShelfHeight+"px"})},[e(x)(v)==="Agent"?(s(),E(N,{key:0,item:v,itemBundle:e(M).Agent},null,8,["item","itemBundle"])):L("",!0),e(x)(v)==="Book"?(s(),E(B,{key:1,item:v,itemBundle:e(M).Book},null,8,["item","itemBundle"])):L("",!0),e(x)(v)==="Mark"?(s(),E(k,{key:2,item:v,itemBundle:e(M).Mark},null,8,["item","itemBundle"])):L("",!0)],4))),128))]))),128))])]))),128)}}},Co=So;const $o=$=>(ce("data-v-db0f0c60"),$=$(),ne(),$),Mo={class:"query-box"},Ao={class:"query-type"},Bo={class:"query-breadcrumb"},To={class:"query-breadcrumb"},No=$o(()=>t("div",{class:"shelf-separator-container"},[t("div",{class:"shelf-separator"})],-1)),mo={class:"nav-div"},xo={class:"library-type-title-box"},Do={class:"library-type-title"},Ho={class:"library-type-subtitle"},Lo={key:0},Oo={__name:"[setQuery]",setup($){const w=he(),R=ge(),c=H(),{libraryData:z,libraryDisplay:m,dataSize:I,formattedLibrary:V,itemHeight:U,itemColour:X,viewHeightBounds:ee,viewColourSet:h}=T(c),{parseDatabase:x,handleViewSelection:F,getIDP:S,itemTypeCheck:C}=H(),Y=P();T(Y),P();const D=K();T(D);const M=D.viewRouteQueries[w.params.setQuery];console.log("setQueryView",M),console.log("viewStore",c.libraryDisplay),console.log("query check",M.view.itemType),Object.assign(c.libraryDisplay.view,M.view),Object.assign(c.libraryDisplay.viewType,M.viewType),Object.assign(c.libraryDisplay.pageText,M.pageText);const J=le(()=>V.value.length!==void 0);te(()=>{x(R[c.libraryDisplay.view.itemType])});const A=b(!1),{x:N,y:B}=de(),k=B,_=b();ve(()=>{te(()=>{k.value>550?_.value.classList.add("showButton"):_.value.classList.remove("showButton")})});const f=()=>{window.scrollTo({top:0,behavior:"smooth"})};return(v,y)=>{const i=vo,j=Co,q=_e;return s(),r("div",null,[t("div",Mo,[t("h1",Ao,l(e(m).pageText.queryType),1),t("h2",Bo,l(e(m).pageText.queryBreadcrumb),1),t("h2",To,"Total Items: "+l(e(I)),1)]),No,t("div",mo,[se(i)]),t("div",xo,[t("h1",Do,l(e(m).pageText.libraryTypeTitle),1),t("p",Ho,l(e(m).pageText.libraryTypeSubtitle),1)]),e(J)?(s(),r("div",Lo,[se(j)])):L("",!0),t("button",{onClick:y[0]||(y[0]=W=>A.value=!e(A)),class:a(["annotation-button",{active:e(A)}])}," 🖊️ ",2),e(A)?(s(),E(q,{key:1})):L("",!0),t("button",{ref_key:"toTopButton",ref:_,onClick:f,class:"to-top-button"},"☝️",512)])}}},Qo=re(Oo,[["__scopeId","data-v-db0f0c60"]]);export{Qo as default};
